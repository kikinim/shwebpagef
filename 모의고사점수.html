<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>과목별 점수 그래프</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: sans-serif;
      padding: 2rem;
    }
    h2 {
      margin-top: 3rem;
      text-align: center;
    }
    canvas {
      max-width: 100%;
      margin: 1rem auto 2rem;
      display: block;
    }
  </style>
</head>
<body>
  <h1 style="text-align:center;">📊 과목별 점수 비교</h1>

  <!-- 그래프 5개 캔버스 -->
  <h2>국어</h2>
  <canvas id="chart_korean"></canvas>

  <h2>영어</h2>
  <canvas id="chart_english"></canvas>

  <h2>수학</h2>
  <canvas id="chart_math"></canvas>

  <h2>사회</h2>
  <canvas id="chart_social"></canvas>

  <h2>과학</h2>
  <canvas id="chart_science"></canvas>

  <script>
    const rawData = [
      { 과목: "국어", 원점수: 87, 표준점수: 105, 백분위: 90, 등급: 1, 날짜: "2025-03-01" },
      { 과목: "국어", 원점수: 91, 표준점수: 109, 백분위: 93, 등급: 1, 날짜: "2025-06-01" },
      { 과목: "국어", 원점수: 63, 표준점수: 97,  백분위: 72, 등급: 2, 날짜: "2025-09-01" },
      { 과목: "국어", 원점수: 74, 표준점수: 100, 백분위: 83, 등급: 2, 날짜: "2025-11-01" },

      { 과목: "영어", 원점수: 66, 표준점수: 98,  백분위: 78, 등급: 2, 날짜: "2025-03-01" },
      { 과목: "영어", 원점수: 53, 표준점수: 89,  백분위: 61, 등급: 3, 날짜: "2025-06-01" },
      { 과목: "영어", 원점수: 48, 표준점수: 85,  백분위: 57, 등급: 3, 날짜: "2025-09-01" },
      { 과목: "영어", 원점수: 92, 표준점수: 112, 백분위: 96, 등급: 1, 날짜: "2025-11-01" },

      { 과목: "수학", 원점수: 45, 표준점수: 87,  백분위: 55, 등급: 4, 날짜: "2025-03-01" },
      { 과목: "수학", 원점수: 78, 표준점수: 104, 백분위: 88, 등급: 2, 날짜: "2025-06-01" },
      { 과목: "수학", 원점수: 88, 표준점수: 110, 백분위: 95, 등급: 1, 날짜: "2025-09-01" },
      { 과목: "수학", 원점수: 51, 표준점수: 90,  백분위: 66, 등급: 3, 날짜: "2025-11-01" },

      { 과목: "사회", 원점수: 72, 표준점수: 102, 백분위: 85, 등급: 2, 날짜: "2025-03-01" },
      { 과목: "사회", 원점수: 41, 표준점수: 80,  백분위: 43, 등급: 4, 날짜: "2025-06-01" },
      { 과목: "사회", 원점수: 62, 표준점수: 96,  백분위: 76, 등급: 3, 날짜: "2025-09-01" },
      { 과목: "사회", 원점수: 36, 표준점수: 76,  백분위: 39, 등급: 5, 날짜: "2025-11-01" },

      { 과목: "과학", 원점수: 59, 표준점수: 95,  백분위: 70, 등급: 3, 날짜: "2025-03-01" },
      { 과목: "과학", 원점수: 68, 표준점수: 98,  백분위: 78, 등급: 2, 날짜: "2025-06-01" },
      { 과목: "과학", 원점수: 55, 표준점수: 92,  백분위: 65, 등급: 3, 날짜: "2025-09-01" },
      { 과목: "과학", 원점수: 69, 표준점수: 99,  백분위: 79, 등급: 2, 날짜: "2025-11-01" },
    ];

    const pastelColors = {
      원점수: "#FFD1DC",    // 연분홍
      표준점수: "#B2EBF2",  // 연하늘
      백분위: "#C8E6C9",    // 연녹
      등급: "#FFF9C4"       // 연노랑
    };

    function drawChart(subject, canvasId) {
      const filtered = rawData.filter(d => d.과목 === subject);
      const labels = filtered.map(d => d.날짜);

      const datasets = ["원점수", "표준점수", "백분위", "등급"].map(field => ({
        label: field,
        data: filtered.map(d => d[field]),
        backgroundColor: pastelColors[field]
      }));

      new Chart(document.getElementById(canvasId), {
        type: "bar",
        data: {
          labels,
          datasets
        },
        options: {
          responsive: true,
          plugins: {
            title: {
              display: false
            },
            legend: {
              position: "top"
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              max: 120
            }
          }
        }
      });
    }

    drawChart("국어", "chart_korean");
    drawChart("영어", "chart_english");
    drawChart("수학", "chart_math");
    drawChart("사회", "chart_social");
    drawChart("과학", "chart_science");
  </script>
</body>
</html>
